{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Usuario\\\\Desktop\\\\Municipio\\\\gestion-documental\\\\src\\\\context\\\\supaContex.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport { v4 as uuidv4 } from 'uuid';\nimport { supabase } from \"../utility/SupabaseClient\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext({});\nexport const useAuth = () => {\n  _s();\n  return useContext(AuthContext);\n};\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nconst login = async (email, password) => supabase.auth.signInWithPassword({\n  email,\n  password\n});\nconst AuthProvider = _ref => {\n  _s2();\n  let {\n    children\n  } = _ref;\n  const [user, setUser] = useState(null);\n  const [auth, setAuth] = useState(false);\n  async function getClientes() {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from(\"pacPlanificacion\").select(\"*\");\n      console.log(data);\n      console.log(error);\n      return data;\n    } catch (error) {\n      return error;\n    }\n  }\n  async function addClient(cliente) {\n    const {\n      codigo,\n      nombreProgramaFinanciero,\n      partida,\n      nombrePartida,\n      codigoOrientadorGasto,\n      descripcionGasto,\n      asignacionInicial,\n      codificado,\n      reformaPresupuesto,\n      presupuestoCodificado2023,\n      traspasos,\n      presupuestoCodificado,\n      id\n    } = cliente;\n    const agenteUid = user.id;\n    console.log(cliente);\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from(\"pacPlanificacion\").insert({\n        codigo,\n        nombreProgramaFinanciero,\n        partida,\n        nombrePartida,\n        codigoOrientadorGasto,\n        descripcionGasto,\n        asignacionInicial,\n        codificado,\n        reformaPresupuesto,\n        presupuestoCodificado2023,\n        traspasos,\n        presupuestoCodificado,\n        id\n      }).single();\n      console.log(error);\n      if (error !== null) {\n        return \"FAIL\";\n      }\n      return \"OK\";\n    } catch (error) {\n      return \"FAIL\";\n    }\n  }\n  async function updateClient(cliente) {\n    const {\n      codigo,\n      nombreProgramaFinanciero,\n      partida,\n      nombrePartida,\n      codigoOrientadorGasto,\n      descripcionGasto,\n      asignacionInicial,\n      codificado,\n      reformaPresupuesto,\n      presupuestoCodificado2023,\n      traspasos,\n      presupuestoCodificado,\n      id\n    } = cliente;\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('pacPlanificacion').update({\n        codigo,\n        nombreProgramaFinanciero,\n        partida,\n        nombrePartida,\n        codigoOrientadorGasto,\n        descripcionGasto,\n        asignacionInicial,\n        codificado,\n        reformaPresupuesto,\n        presupuestoCodificado2023,\n        traspasos,\n        presupuestoCodificado,\n        id\n      }).eq('id', cliente.id).select();\n      return \"OK\";\n    } catch (error) {\n      return \"FAIL\";\n    }\n  }\n  async function deleteClient(id) {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('pacPlanificacion').delete().eq('id', id).select();\n      return \"OK\";\n    } catch (error) {\n      return \"FAIL\";\n    }\n  }\n  async function uploadDocument(file) {\n    const uuid = uuidv4();\n    const {\n      data,\n      error\n    } = await supabase.storage.from('images').upload(user.id + \"/\" + uuid, file); // Cooper/ASDFASDFASDF uuid, taylorSwift.png -> taylorSwift.png\n\n    if (data) {\n      console.log(data);\n      return data;\n    }\n    console.log(error);\n    return error;\n  }\n  useEffect(() => {\n    const {\n      data\n    } = supabase.auth.onAuthStateChange((event, session) => {\n      if (event === \"SIGNED_IN\") {\n        setUser(session.user);\n        //setAuth(true);\n\n        switch (session.user.email) {\n          case 'sebasmena@gmail.com':\n            window.location.href = 'https://sites.google.com/view/gestionadmi/dashboard';\n            break;\n          case 'tecnico-oopp@gadmr.com':\n            window.location.href = 'https://sites.google.com/view/gtics/dashboard';\n            break;\n        }\n      }\n    });\n    return () => {\n      data.subscription.unsubscribe();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      login,\n      getClientes,\n      addClient,\n      updateClient,\n      deleteClient,\n      uploadDocument\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this);\n};\n_s2(AuthProvider, \"ojGN/dhoigeqxdWUN1ItNW+qqxM=\");\n_c = AuthProvider;\nexport default AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useContext","useEffect","useState","v4","uuidv4","supabase","jsxDEV","_jsxDEV","AuthContext","useAuth","_s","login","email","password","auth","signInWithPassword","AuthProvider","_ref","_s2","children","user","setUser","setAuth","getClientes","data","error","from","select","console","log","addClient","cliente","codigo","nombreProgramaFinanciero","partida","nombrePartida","codigoOrientadorGasto","descripcionGasto","asignacionInicial","codificado","reformaPresupuesto","presupuestoCodificado2023","traspasos","presupuestoCodificado","id","agenteUid","insert","single","updateClient","update","eq","deleteClient","delete","uploadDocument","file","uuid","storage","upload","onAuthStateChange","event","session","window","location","href","subscription","unsubscribe","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Usuario/Desktop/Municipio/gestion-documental/src/context/supaContex.js"],"sourcesContent":["import { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nimport { supabase } from \"../utility/SupabaseClient\";\r\n\r\nconst AuthContext = createContext({});\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\n\r\n\r\nconst login =  async (email, password) =>\r\nsupabase.auth.signInWithPassword({ email, password });\r\n\r\nconst AuthProvider = ({ children }) => {\r\n\r\n\r\n  const [user, setUser] = useState(null);\r\n  const [auth, setAuth] = useState(false);\r\n\r\n  async function getClientes() {\r\n\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from(\"pacPlanificacion\")\r\n        .select(\"*\");\r\n      \r\n      console.log(data)\r\n      console.log(error)\r\n\r\n      return data\r\n\r\n    } catch (error) {\r\n\r\n      return error\r\n    }\r\n  }\r\n\r\n  async function addClient (cliente) {\r\n\r\n  const  {codigo,nombreProgramaFinanciero, partida,\tnombrePartida,\tcodigoOrientadorGasto, descripcionGasto,\tasignacionInicial,\tcodificado,\treformaPresupuesto,\tpresupuestoCodificado2023,\ttraspasos, presupuestoCodificado, id} = cliente;\r\n\r\n  const agenteUid = user.id;\r\n    console.log(cliente)\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from(\"pacPlanificacion\")\r\n        .insert( {codigo,nombreProgramaFinanciero, partida,\tnombrePartida,\tcodigoOrientadorGasto, descripcionGasto,\tasignacionInicial,\tcodificado,\treformaPresupuesto,\tpresupuestoCodificado2023,\ttraspasos, presupuestoCodificado, id})\r\n        .single()\r\n        console.log(error)\r\n      if(error !== null){return \"FAIL\"}\r\n\r\n      return \"OK\"\r\n    } catch (error) {\r\n      return \"FAIL\"\r\n    }\r\n  }\r\n\r\n  \r\n  async function updateClient (cliente) {\r\n    const {codigo,nombreProgramaFinanciero, partida,\tnombrePartida,\tcodigoOrientadorGasto, descripcionGasto,\tasignacionInicial,\tcodificado,\treformaPresupuesto,\tpresupuestoCodificado2023,\ttraspasos, presupuestoCodificado, id} = cliente;\r\n    \r\n    try {\r\n      const { data, error } = await supabase\r\n      .from('pacPlanificacion')\r\n      .update({codigo,nombreProgramaFinanciero, partida,\tnombrePartida,\tcodigoOrientadorGasto, descripcionGasto,\tasignacionInicial,\tcodificado,\treformaPresupuesto,\tpresupuestoCodificado2023,\ttraspasos, presupuestoCodificado, id})\r\n      .eq('id', cliente.id)\r\n      .select()\r\n\r\n      return \"OK\"\r\n    } catch (error) {\r\n      return \"FAIL\"\r\n    }\r\n  }\r\n\r\n  async function deleteClient (id) {\r\n    \r\n    try {\r\n      const { data, error } = await supabase\r\n      .from('pacPlanificacion')\r\n      .delete()\r\n      .eq('id', id)\r\n      .select()\r\n\r\n      return \"OK\"\r\n    } catch (error) {\r\n      return \"FAIL\"\r\n    }\r\n  }\r\n\r\n async function uploadDocument(file) {\r\n    const uuid = uuidv4();\r\n    const { data, error } = await supabase\r\n      .storage\r\n      .from('images')\r\n      .upload(user.id + \"/\" + uuid, file)  // Cooper/ASDFASDFASDF uuid, taylorSwift.png -> taylorSwift.png\r\n\r\n    if(data) {\r\n      console.log(data);\r\n\r\n      return data;\r\n    } \r\n      console.log(error);\r\n\r\n      return error;\r\n   \r\n\r\n    \r\n  }\r\n\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    const { data } = supabase.auth.onAuthStateChange((event, session) => {\r\n      if (event === \"SIGNED_IN\") {\r\n        setUser(session.user);\r\n        //setAuth(true);\r\n\r\n        switch (session.user.email){\r\n          case 'sebasmena@gmail.com':\r\n            window.location.href = 'https://sites.google.com/view/gestionadmi/dashboard';\r\n          break;\r\n          case 'tecnico-oopp@gadmr.com':\r\n            window.location.href = 'https://sites.google.com/view/gtics/dashboard';\r\n          break;\r\n        }\r\n\r\n      }\r\n    });\r\n    return () => {\r\n      data.subscription.unsubscribe();\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, login, getClientes,addClient,updateClient,deleteClient,uploadDocument }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthProvider;"],"mappings":"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"},"metadata":{},"sourceType":"module"}