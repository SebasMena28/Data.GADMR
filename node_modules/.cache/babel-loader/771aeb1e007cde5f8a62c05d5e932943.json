{"ast":null,"code":"import React,{useState}from'react';import{TextField,Button,Typography}from'@mui/material';import{Link as RouterLink}from'react-router-dom';import{useAuth}from'src/context/supaContex';//import { supabase } from './supabase'; // Asegúrate de importar tu instancia de Supabase\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ModificarContrasenia(){const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[success,setSuccess]=useState(false);const[showReturnButton,setShowReturnButton]=useState(false);const{cambiar}=useAuth();const handleResetPassword=async()=>{try{setLoading(true);setError(null);await cambiar(password);setSuccess(true);setShowReturnButton(true);// Mostrar el botón \"Volver al Login\" después de enviar el correo de recuperación\n}catch(error){console.error('Error resetting password:',error.message);setError(error.message);}finally{setLoading(false);}};const handleChangesMade=()=>{setShowReturnButton(true);// Mostrar el botón \"Volver al Login\" después de realizar cambios\n};return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:400,margin:'auto'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"Recuperar Contrase\\xF1a\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"email\",label:\"Correo Electr\\xF3nico\",variant:\"outlined\",margin:\"normal\",value:email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"password\",label:\"Contrase\\xF1a\",type:\"password\",variant:\"outlined\",margin:\"normal\",value:password,onChange:e=>setPassword(e.target.value)}),error&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"error\",gutterBottom:true,children:[\"Error: \",error]}),success&&/*#__PURE__*/_jsx(Typography,{variant:\"body2\",gutterBottom:true,children:\"Contrase\\xF1a actualizada!.\"}),showReturnButton&&/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",color:\"primary\",component:RouterLink,to:\"/login\",style:{marginTop:16},children:\"Volver a Login\"}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",color:\"primary\",onClick:()=>{handleResetPassword();handleChangesMade();},disabled:loading||!email,style:{marginTop:16},children:loading?'Cargando...':'Recuperar contraseña'})]});}export default ModificarContrasenia;","map":{"version":3,"names":["React","useState","TextField","Button","Typography","Link","RouterLink","useAuth","jsx","_jsx","jsxs","_jsxs","ModificarContrasenia","email","setEmail","password","setPassword","loading","setLoading","error","setError","success","setSuccess","showReturnButton","setShowReturnButton","cambiar","handleResetPassword","console","message","handleChangesMade","style","maxWidth","margin","children","variant","gutterBottom","fullWidth","id","label","value","onChange","e","target","type","color","component","to","marginTop","onClick","disabled"],"sources":["C:/Users/Usuario/Desktop/Municipio/Data.GADMR/src/sections/auth/login/ReestablecerContrasenia.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { TextField, Button, Typography } from '@mui/material';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { useAuth } from 'src/context/supaContex';\r\n//import { supabase } from './supabase'; // Asegúrate de importar tu instancia de Supabase\r\n\r\nfunction ModificarContrasenia() {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(false);\r\n  const [showReturnButton, setShowReturnButton] = useState(false);\r\n  const { cambiar } = useAuth();\r\n\r\n  const handleResetPassword = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      await cambiar(password);\r\n      setSuccess(true);\r\n      setShowReturnButton(true); // Mostrar el botón \"Volver al Login\" después de enviar el correo de recuperación\r\n    } catch (error) {\r\n      console.error('Error resetting password:', error.message);\r\n      setError(error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChangesMade = () => {\r\n    setShowReturnButton(true); // Mostrar el botón \"Volver al Login\" después de realizar cambios\r\n  };\r\n\r\n  return (\r\n    <div style={{ maxWidth: 400, margin: 'auto' }}>\r\n      <Typography variant=\"h5\" gutterBottom>Recuperar Contraseña</Typography>\r\n      <TextField\r\n        fullWidth\r\n        id=\"email\"\r\n        label=\"Correo Electrónico\"\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        value={email}\r\n        onChange={(e) => setEmail(e.target.value)}\r\n      />\r\n      <TextField\r\n        fullWidth\r\n        id=\"password\"\r\n        label=\"Contraseña\"\r\n        type=\"password\"\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n      />\r\n      {error && <Typography variant=\"body2\" color=\"error\" gutterBottom>Error: {error}</Typography>}\r\n      {success && <Typography variant=\"body2\" gutterBottom>Contraseña actualizada!.</Typography>}\r\n      {showReturnButton && <Button\r\n        fullWidth\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        component={RouterLink}\r\n        to=\"/login\"\r\n        style={{ marginTop: 16 }}\r\n      >\r\n        Volver a Login\r\n      </Button>}\r\n      <Button\r\n        fullWidth\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={() => {\r\n            handleResetPassword();\r\n            handleChangesMade();\r\n          }}\r\n        disabled={loading || !email}\r\n        style={{ marginTop: 16 }}\r\n      >\r\n        {loading ? 'Cargando...' : 'Recuperar contraseña'}\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ModificarContrasenia;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}