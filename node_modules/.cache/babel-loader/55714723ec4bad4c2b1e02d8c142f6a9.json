{"ast":null,"code":"import{useState,useContext,useEffect,useRef}from'react';import{useNavigate}from'react-router-dom';// @mui\nimport{Link,Stack,IconButton,InputAdornment,TextField,Checkbox}from'@mui/material';import{LoadingButton}from'@mui/lab';// components\nimport Iconify from'../../../components/iconify';import{useAuth}from'../../../context/supaContex';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function LoginForm(){const navigate=useNavigate();const emailRef=useRef(null);const passwordRef=useRef(null);const[email,setEmail]=useState();const[password,setPassword]=useState();const[mostrar,setMostrar]=useState();const[errorMsg,setErrorMsg]=useState('');const[loading,setLoading]=useState(false);const[showPassword,setShowPassword]=useState(false);const{login}=useAuth();const handleSubmit=async e=>{e.preventDefault();try{setMostrar('');setErrorMsg('');setLoading(true);console.log(email);if(!email||!password){setErrorMsg('Please fill in the fields');setMostrar('true');return;}const{data:{user,session},error}=await login(email,password);if(error)setErrorMsg(error.message);if(user&&session)navigate('/dashboard/app');}catch(error){setErrorMsg('Email or Password Incorrect');setMostrar('true');}setLoading(false);setMostrar('true');};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Stack,{spacing:3,alignItems:\"center\",justifyContent:\"space-between\",sx:{'& .MuiTextField-root':{m:1,width:'35ch'}},children:[/*#__PURE__*/_jsx(Stack,{visibility:mostrar=='true'?'visible':'hidden',children:/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:\" Datos ingresados incorrectos. Intente de nuevo\"})}),/*#__PURE__*/_jsx(TextField,{name:\"email\",label:\"Correo electr\\xF3nico\",onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(TextField,{name:\"password\",label:\"Contrase\\xF1a\",type:showPassword?'text':'password',onChange:e=>setPassword(e.target.value),required:true,InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{onClick:()=>setShowPassword(!showPassword),edge:\"end\",children:/*#__PURE__*/_jsx(Iconify,{icon:showPassword?'eva:eye-fill':'eva:eye-off-fill'})})})}})]}),/*#__PURE__*/_jsx(LoadingButton,{size:\"large\",type:\"submit\",variant:\"contained\",onClick:handleSubmit,children:\"Iniciar sesi\\xF3n\"}),window.location.pathname!=='/login'&&/*#__PURE__*/_jsx(Apu,{url:\"\"})]});}","map":{"version":3,"names":["useState","useContext","useEffect","useRef","useNavigate","Link","Stack","IconButton","InputAdornment","TextField","Checkbox","LoadingButton","Iconify","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginForm","navigate","emailRef","passwordRef","email","setEmail","password","setPassword","mostrar","setMostrar","errorMsg","setErrorMsg","loading","setLoading","showPassword","setShowPassword","login","handleSubmit","e","preventDefault","console","log","data","user","session","error","message","children","spacing","alignItems","justifyContent","sx","m","width","visibility","style","color","name","label","onChange","target","value","required","type","InputProps","endAdornment","position","onClick","edge","icon","size","variant","window","location","pathname","Apu","url"],"sources":["C:/Users/Usuario/Desktop/Municipio/Data.GADMR/src/sections/auth/login/LoginForm.js"],"sourcesContent":["import { useState, useContext, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n// @mui\r\nimport { Link, Stack, IconButton, InputAdornment, TextField, Checkbox } from '@mui/material';\r\nimport { LoadingButton } from '@mui/lab';\r\n// components\r\nimport Iconify from '../../../components/iconify';\r\nimport { useAuth } from '../../../context/supaContex';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport default function LoginForm() {\r\n  const navigate = useNavigate();\r\n  const emailRef = useRef(null);\r\n  const passwordRef = useRef(null);\r\n  const [email, setEmail] = useState();\r\n  const [password, setPassword] = useState();\r\n\r\n  const [mostrar, setMostrar] = useState();\r\n\r\n  const [errorMsg, setErrorMsg] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const { login } = useAuth();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      setMostrar('');\r\n      setErrorMsg('');\r\n      setLoading(true);\r\n      console.log(email);\r\n      if (!email || !password) {\r\n        setErrorMsg('Please fill in the fields');\r\n        setMostrar('true');\r\n        return;\r\n      }\r\n      const {\r\n        data: { user, session },\r\n        error,\r\n      } = await login(email, password);\r\n\r\n      if (error) setErrorMsg(error.message);\r\n      if (user && session) navigate('/dashboard/app');\r\n    } catch (error) {\r\n      setErrorMsg('Email or Password Incorrect');\r\n      setMostrar('true');\r\n    }\r\n    setLoading(false);\r\n    setMostrar('true');\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Stack\r\n        spacing={3}\r\n        alignItems=\"center\"\r\n        justifyContent=\"space-between\"\r\n        sx={{\r\n          '& .MuiTextField-root': { m: 1, width: '35ch' },\r\n        }}\r\n      >\r\n        <Stack visibility={mostrar == 'true' ? 'visible' : 'hidden'}>\r\n          <p style={{ color: 'red' }}> Datos ingresados incorrectos. Intente de nuevo</p>\r\n        </Stack>\r\n\r\n        <TextField name=\"email\" label=\"Correo electrónico\" onChange={(e) => setEmail(e.target.value)} required />\r\n\r\n        <TextField\r\n          name=\"password\"\r\n          label=\"Contraseña\"\r\n          type={showPassword ? 'text' : 'password'}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          required\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                <IconButton onClick={() => setShowPassword(!showPassword)} edge=\"end\">\r\n                  <Iconify icon={showPassword ? 'eva:eye-fill' : 'eva:eye-off-fill'} />\r\n                </IconButton>\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n        />\r\n      </Stack>\r\n\r\n      {/*<Stack direction=\"row\" justifyContent=\"space-between\" sx={{ my: 2 }}>\r\n        <Link variant=\"subtitle2\" underline=\"hover\" href='reset'>\r\n          ¿Olvidaste tu contraseña?\r\n        </Link>\r\n        </Stack>*/}\r\n\r\n      <LoadingButton size=\"large\" type=\"submit\" variant=\"contained\" onClick={handleSubmit}>\r\n        Iniciar sesión\r\n      </LoadingButton>\r\n\r\n      {window.location.pathname !== '/login' && <Apu url=\"\" />}\r\n\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}